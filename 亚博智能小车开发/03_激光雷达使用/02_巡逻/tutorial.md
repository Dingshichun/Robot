# 雷达巡逻
### (1) 巡逻
注意：虚拟机需要与小车处在同一个局域网下，且 ROS_DOMAIN_ID 需要一致。  
功能：小车连接上代理，运行程序，在动态参数调节器设定需要巡逻的路线，然后点击开始。小车会根据设定的巡逻路线进行运动，同时小车上的雷达会扫描设定的雷达角度和设定障碍检测距离范围内是否有障碍物，有障碍则会停下且蜂鸣器会响，没有障碍物则继续巡逻。  
首先打开一个终端将小车连接上代理，终端输入 `sh ~/start_agent_computer.sh`  
启动小车处理底层数据程序，该程序会发布 odom->base_footprint 的 TF 变换，有了这个 TF 变化接可以计算出“小车走了多远”，新开一个终端，输入指令 `ros2 run yahboomcar_base_node base_node_X3` 启动数据程序。  
然后，新开终端，输入 `ros2 run yahboomcar_bringup patrol` 启动巡逻程序。  
打开动态参数调节器设置巡逻路线，终端输入 `ros2 run rqt_reconfigure rqt_reconfigure` ，需要点击 Refresh 刷新后才可以看到全部节点。  
开始巡逻。在 rqt 界面中，找到 YahboomCarPatrol 节点，里边的【Command】就是设定的巡逻路线这里以正方形巡逻路线为例，下边会说明有哪几种巡逻路线。在【Command】设定了路线后，点击 Switch 即可开始巡逻。  
以正方形为例，先走直线后自转 90 度，再走直线，再自转 90 度，以此类推，直到走完的路线为一个正方形。如果在走的过程中，遇到障碍物，则会停下，蜂鸣器响。遇到障碍物会打印 obstacles 。
